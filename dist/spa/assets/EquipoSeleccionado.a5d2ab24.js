import{c4 as L,r as c,aT as r,ad as u,ab as v,bo as T,ae as l,f as d,c6 as S,F as P,aZ as K,ci as R,c7 as D,bO as z,cc as Q,cj as A,c as m,o as J,O as W,ac as f,W as N,ck as O}from"./index.fe61ee2b.js";import{Q as Y}from"./QPage.e3a32904.js";import{u as B}from"./use-quasar.6e3d8175.js";import{F as Z}from"./FormContadores.a1a2cfe9.js";import{Q as G}from"./QForm.831263eb.js";import{u as X}from"./ReCaptchaVuePlugin.1e4a9531.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./QSpace.5039b404.js";var oe="/assets/btn-soporte.c443699c.png",te="/assets/btn-consumibles.d5f309b5.png",se="/assets/btn-contadores.63385d7b.png";const ae={class:"cuerpo"},le={key:0},re={key:1},ne={class:"articulos"},ie={class:"botones-submit"},ue={__name:"FormSoporte",props:{consumibles:Boolean,equipo:Object},emits:"volver",setup(q,{emit:x}){const y=q,k=x,s=B();L();const i=c(null),_=c(0),{executeRecaptcha:g}=X(),$=c(y.equipo.articulos),b=c([]),a=c({contacto:"",telefono:"",horario:"",descripcion:""}),V=()=>{console.log(i.value),i.value.resetValidation(),b.value=[],a.value.contacto="",a.value.telefono="",a.value.descripcion="",a.value.horario="",_.value++},E=()=>{V(),k("volver")},w=async()=>{s.loading.show();try{const t=await g("submit_form");var C=y.consumibles?"SOLICITUD DE CONSUMIBLES":a.value.descripcion;const e=await Q.post("/soporte.php",{recaptchaToken:t,tkn:y.equipo.TKN,contacto:a.value.contacto,telefono:a.value.telefono,horario:a.value.horario,descripcion:C,articulos:b.value});console.log("Verificaci\xF3n",e.data),e.data.success&&e.data.message.status=="OK"?(s.notify({color:"green",position:"top",message:"Aviso creado correctamente",icon:"check_circle"}),V(),k("volver")):s.notify({color:"red",position:"top",message:"No se pudo al crear el aviso",icon:"report_problem"})}catch(t){console.error("Error:",t),s.notify({color:"red",position:"top",message:"Error al crear el aviso",icon:"report_problem"})}s.loading.hide()};return(C,t)=>(r(),u("div",ae,[(r(),v(G,{onSubmit:z(w,["prevent"]),ref_key:"form",ref:i,key:_.value},{default:T(()=>[t[7]||(t[7]=l("label",{for:"contactName",style:{"padding-left":"12px"},class:"texto-descripcion"},"Nombre del Contacto",-1)),d(S,{id:"contactName",modelValue:a.value.contacto,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.contacto=e),outlined:"",dense:"",rules:[e=>!!e||"Este campo es obligatorio",e=>e.toString().length<=100||"El texto es demasiado largo"]},null,8,["modelValue","rules"]),t[8]||(t[8]=l("label",{for:"contactPhone",style:{"padding-left":"12px"},class:"texto-descripcion"},"Tel\xE9fono del Contacto",-1)),d(S,{id:"contactPhone",modelValue:a.value.telefono,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.telefono=e),outlined:"",dense:"",rules:[e=>!!e||"Este campo es obligatorio",e=>e.toString().length<=40||"El texto es demasiado largo"]},null,8,["modelValue","rules"]),t[9]||(t[9]=l("label",{for:"contactHour",style:{"padding-left":"12px"},class:"texto-descripcion"},"Horario",-1)),d(S,{id:"contactHour",modelValue:a.value.horario,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.horario=e),outlined:"",dense:"",rules:[e=>!!e||"Este campo es obligatorio",e=>e.toString().length<=40||"El texto es demasiado largo"]},null,8,["modelValue","rules"]),q.consumibles?(r(),u("div",re,[t[6]||(t[6]=l("span",{style:{margin:"0px"},class:"texto-descripcion"},"Art\xEDculos",-1)),l("div",ne,[(r(!0),u(P,null,K($.value,e=>(r(),v(R,{size:"md",modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=M=>b.value=M),dense:"",class:"articulo",key:e.id,val:e.id,label:e.nombre.substring(e.nombre.indexOf(" ")+1)},null,8,["modelValue","val","label"]))),128))])])):(r(),u("div",le,[t[5]||(t[5]=l("label",{for:"problem",style:{"padding-left":"12px"},class:"texto-descripcion"},"Descripci\xF3n del Problema",-1)),d(S,{id:"problem",modelValue:a.value.descripcion,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.descripcion=e),outlined:"",type:"textarea",rules:[e=>!!e||"Este campo es obligatorio",e=>e.toString().length<=1e3||"El texto es demasiado largo"],autogrow:""},null,8,["modelValue","rules"])])),l("div",ie,[d(D,{label:"Enviar",type:"submit",color:"primary",unelevated:"",dense:""}),d(D,{unelevated:"",label:"Cancelar",type:"reset",color:"negative",outline:"",dense:"",onClick:E,class:"q-ml-sm"})])]),_:1}))]))}};var F=ee(ue,[["__scopeId","data-v-3e32067d"]]),ce="/assets/SBS-logo-azul.45467498.png";const de={class:"titulo"},pe={class:"q-pa-md"},me={class:"texto-titulo cabecera"},ve={class:"text-subtitle1 cabecera text-weight-bold"},ge=["src"],be={key:0,class:"texto-titulo cabecera"},fe={class:"contenedor-texto"},ye=["innerHTML"],ke=["innerHTML"],xe={class:"cuerpo"},_e={key:0,class:"botones"},h=100,Ne={__name:"EquipoSeleccionado",setup(q){const x=A(),y=L(),k=B(),s=c({}),i=c(0),_=c(null),g=c(!1),$=m(()=>x.path.includes("dashboard")),b=m(()=>{const p=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],o=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],n=new Date,H=p[n.getDay()],U=n.getDate(),j=o[n.getMonth()],I=n.getFullYear();return`${H}, ${U} de ${j} de ${I}`}),a=m(()=>s.value.descripcion?s.value.descripcion.replace(/\n/g,"<br>"):""),V=m(()=>a.value.length>h?a.value.substring(0,h)+"...":a.value),E=m(()=>s.value.imagen?"data:image/png;base64,"+s.value.imagen:ce),w=m(()=>s.value.articulos?s.value.articulos.length>0:!1),C=m(()=>s.value.contadores?s.value.contadores.length>0:!1),t=()=>{g.value=!g.value},e=p=>{i.value=p},M=async()=>{const p=x.params.token;if(!(s.value!==null&&s.value.TKN===p)){k.loading.show();try{const n=await Q.get("/equipos.php?tkn="+p);console.log(n.data),n.data.success&&(s.value=n.data.message,s.value.NOM&&(s.value.NOM=s.value.NOM.toLowerCase()))}catch(n){console.error("Error: ",n)}k.loading.hide()}};return J(()=>{M()}),(p,o)=>(r(),v(Y,{class:"pagina"},{default:T(()=>[l("div",de,[l("div",pe,[$.value?(r(),v(D,{key:0,class:"btn-volver","no-caps":"",icon:"arrow_back",onClick:o[0]||(o[0]=n=>W(y).back()),label:"Volver",flat:""})):f("",!0)]),l("span",me,N(b.value),1),o[7]||(o[7]=l("br",null,null,-1)),l("span",ve,N(s.value.NOM),1),o[8]||(o[8]=l("br",null,null,-1)),l("img",{src:E.value,style:{"object-fit":"cover"},ref_key:"imagen",ref:_,id:"imagen"},null,8,ge),s.value.descripcion!=""?(r(),u("span",be,"Descripci\xF3n del equipo")):f("",!0),o[9]||(o[9]=l("br",null,null,-1)),l("div",fe,[g.value?(r(),u("p",{key:0,class:"texto-descripcion",innerHTML:a.value},null,8,ye)):(r(),u("p",{key:1,class:"texto-descripcion",innerHTML:V.value},null,8,ke)),a.value.length>h?(r(),u("span",{key:2,onClick:t,class:"leer-mas"},N(g.value?"Leer menos":"Leer m\xE1s"),1)):f("",!0)])]),l("div",xe,[d(O,{style:{width:"100px","margin-top":"1rem","margin-bottom":"1rem"}}),o[13]||(o[13]=l("span",{class:"texto-titulo cabecera"},"Seleccione una opci\xF3n",-1)),i.value===0?(r(),u("div",_e,[l("div",{color:"primary",onClick:o[1]||(o[1]=n=>e(1))},o[10]||(o[10]=[l("img",{src:oe,width:"150"},null,-1)])),w.value?(r(),u("div",{key:0,color:"primary",onClick:o[2]||(o[2]=n=>e(2))},o[11]||(o[11]=[l("img",{src:te,width:"150"},null,-1)]))):f("",!0),C.value?(r(),u("div",{key:1,color:"primary",onClick:o[3]||(o[3]=n=>e(3))},o[12]||(o[12]=[l("img",{src:se,width:"150"},null,-1)]))):f("",!0)])):i.value===1?(r(),v(F,{key:1,consumibles:!1,onVolver:o[4]||(o[4]=n=>i.value=0),equipo:s.value},null,8,["equipo"])):i.value===2?(r(),v(F,{key:2,consumibles:!0,onVolver:o[5]||(o[5]=n=>i.value=0),equipo:s.value},null,8,["equipo"])):i.value===3?(r(),v(Z,{key:3,onVolver:o[6]||(o[6]=n=>i.value=0),equipo:s.value},null,8,["equipo"])):f("",!0),d(O,{style:{width:"100px","margin-top":"1rem","margin-bottom":"1rem"}})])]),_:1}))}};export{Ne as default};
