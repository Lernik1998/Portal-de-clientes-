import{cj as A,c4 as Q,r as f,o as T,aL as C,aT as c,ab as g,bo as s,ae as a,f as i,O as E,c7 as v,W as t,ck as N,ad as r,aZ as h,ai as q,ak as u,F as b,ac as w}from"./index.fe61ee2b.js";import{u as B,a as V,b as $,Q as F}from"./avisos.3f045095.js";import{Q as p,a as I}from"./QTable.6ec200bc.js";import{Q as j}from"./QPage.e3a32904.js";import{u as L}from"./use-quasar.6e3d8175.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.759a650d.js";import"./QList.7dac5c91.js";import"./QSelect.27ff7cce.js";const D={class:"q-pa-lg"},O={class:"row"},R={class:"col-12 col-md-4 q-pa-md"},J={class:"text-h6"},M={class:"text-overline"},U={class:"caption-text"},W={key:0},Z={class:"text-body2 informe-titulo"},G={class:"text-caption informe-texto"},H={class:"col-12 col-md-8 q-pa-md"},K={class:"text-subtitle1"},X={class:"q-pa-sm flex items-center justify-end"},Y={class:"q-mx-md"},ee={__name:"AvisoSeleccionado",setup(ae){A();const x=Q();B();const _=L(),l=f([]),d=f({codigo:"",lineas:[]}),y=f([{name:"articulo",label:"Art\xEDculo",align:"left",field:"articulo"},{name:"cantidad",label:"Cantidad",align:"left",field:"cantidad"},{name:"estado",label:"Estado",align:"left",field:"estado"}]),k=()=>{let o=_.sessionStorage.getItem("aviso");o=JSON.parse(o),d.value=o,console.log("AVISO SEL.",d.value),l.value=[],l.value.push({id:"C",titulo:"Aviso Creado",fecha:`${o.creado}`,descripcion:"El aviso fue registrado correctamente.",completado:!0}),o.asignado?l.value.push({id:"A",titulo:"Asignado a T\xE9cnico",fecha:`${o.asignado_el}`,descripcion:"Se ha asignado a un t\xE9cnico.",completado:!0}):l.value.push({id:"A",titulo:"Asignado a T\xE9cnico",fecha:"-",descripcion:"Pendiente de asignar a un t\xE9cnico.",completado:!1}),o.estado!=="Nueva"?l.value.push({id:"P",titulo:"En Proceso",fecha:`${o.inicio_informes}`,descripcion:"El t\xE9cnico est\xE1 trabajando en el aviso.",informes:o.informes,completado:!0}):l.value.push({id:"P",titulo:"En Proceso",fecha:"-",descripcion:"Pendiente de iniciar el trabajo.",completado:!1}),o.estado==="Terminado"||o.estado==="Supervisar"?l.value.push({id:"T",titulo:"Finalizado",fecha:`${o.fin_informes}`,descripcion:"El aviso ha sido resuelto y cerrado.",completado:!0}):l.value.push({id:"T",titulo:"Finalizado",fecha:"-",descripcion:"Pendiente de resoluci\xF3n.",completado:!1})};return T(()=>k()),C(()=>_.sessionStorage.removeItem("aviso")),(o,n)=>(c(),g(j,{class:"pagina-detalle"},{default:s(()=>[a("div",D,[i(v,{class:"btn-volver","no-caps":"",icon:"arrow_back",onClick:n[0]||(n[0]=e=>E(x).back()),label:"Volver",flat:""}),a("div",O,[a("div",R,[a("div",J,t(d.value.codigo),1),i(N),i(F,{align:"left",dense:""},{default:s(()=>[(c(!0),r(b,null,h(l.value,(e,P)=>(c(),g(V,{key:P,color:e.completado?"green":"grey",icon:e.completado?"check_circle":"hourglass_empty"},q({subtitle:s(()=>[n[1]||(n[1]=a("div",{class:"text-body1"},null,-1)),u(t(e.titulo),1)]),default:s(()=>[a("div",U,t(e.descripcion),1),e.id==="P"&&e.informes?(c(),r("div",W,[i($,{"expand-separator":"","default-opened":"",label:"informes t\xE9cnico",class:"expansor"},{default:s(()=>[(c(!0),r(b,null,h(e.informes,(m,S)=>(c(),r("div",{key:S,class:"elemento-informe"},[a("p",Z,t(m.tecnico+" - "+m.fin),1),a("p",G,t(m.informe),1)]))),128))]),_:2},1024)])):w("",!0)]),_:2},[e.fecha!="-"?{name:"title",fn:s(()=>[a("div",M,t(e.fecha),1)]),key:"0"}:void 0]),1032,["color","icon"]))),128))]),_:1})]),a("div",H,[n[2]||(n[2]=a("div",{class:"text-h6"},"Detalles del Aviso",-1)),a("div",K,t(d.value.descripcion),1),n[3]||(n[3]=a("div",{class:"text-overline text-center"},"Piezas solicitadas",-1)),i(I,{rows:d.value.lineas,columns:y.value,"no-data-label":"No hay datos para mostrar.","row-key":"articulo","rows-per-page-options":[5],flat:"",bordered:"",class:"q-mt-md tabla"},{pagination:s(e=>[a("div",X,[i(v,{flat:"",round:"",icon:"chevron_left",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),a("span",Y,"P\xE1gina "+t(e.pagination.page)+" de "+t(e.pagesNumber),1),i(v,{flat:"",round:"",icon:"chevron_right",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"])])]),"body-cell-articulo":s(({row:e})=>[i(p,null,{default:s(()=>[u(t(e.articulo),1)]),_:2},1024)]),"body-cell-cantidad":s(({row:e})=>[i(p,null,{default:s(()=>[u(t(e.cantidad),1)]),_:2},1024)]),"body-cell-estado":s(({row:e})=>[i(p,null,{default:s(()=>[u(t(e.estado),1)]),_:2},1024)]),_:1},8,["rows","columns"])])])])]),_:1}))}};var ue=z(ee,[["__scopeId","data-v-32a74fac"]]);export{ue as default};
